Vagrant.configure("2") do |config|
  config.vm.box = "ubuntu/jammy64" # Ubuntu 22.04 LTS base box
  config.vm.hostname = `hostname`.strip # Set VM hostname to match host machine

  # No synced folder (you clone inside the VM instead)
  # config.vm.synced_folder "../../../", "/opt/fitness-project"

  # Forward ports:
  # 8080 -> Nginx (frontend + backend reverse proxy)
  # 3001 -> Node backend (optional, for debugging)
  config.vm.network "forwarded_port", guest: 80, host: 80, auto_correct: true # Nginx HTTP port
  config.vm.network "forwarded_port", guest: 3001, host: 3001 # Node backend port (optional)
  config.vm.network "forwarded_port", guest: 443, host: 443, auto_correct: true # Nginx HTTPS port


  # VM hardware settings
  config.vm.provider "virtualbox" do |vb| # VirtualBox settings
    vb.gui = false # No GUI
    vb.memory = 4096 # 4GB RAM
    vb.cpus = 2 # 2 CPU cores
  end

  # Provision script
  config.vm.provision "shell", path: "provision.sh" # Provisioning script path
end